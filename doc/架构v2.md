## 架构独立版

#### 为什么？
* 在miner机器上部署程序会影响，挖矿程序，造成一定的负担，程序需要隔离部署，减少对miner的影响

#### 获取信息方式
* 获取miner 挖矿相关信息，通过miner api的方式获取
* 获取设备硬件信息情况，通过远程ssh 发去命令获取

#### 实现
数据结构
* 定义两张表结构 minerInfo 和 workerInfo ;minerInfo存储miner总体概览信息(余额，扇区总数等信息), workerInfo 存储每台机器任务信息，硬件指标相关信息
* minerInfo表的key 为minerId, workerInfo key值为 {hostName,minerId} 两个字段标识; 每个字段都有一个flag标识 数据是否更新；

信息采集模块 collection，一个miner集群对应一个采集对象 client，
* miner集群配置信息,通过配置文件读取
    * miner api url,token等信息
    * worker列表通过 miner api获取
* 通过定时任务，通过miner api获取miner挖矿相关的信息
* 定时任务并发获取 worker列表中的信息 

信息处理模块 process
* 初始化websocket服务，
* 接收从信息采集 client 数据, 并存入到数据表中，变化的部分更改 flag 为true
* 定时任务把变化的数据根据订阅的模式推送到前端
    * 以minerId作为订阅基本单位，订阅那个minerId就往前端推送想对应的信息 
    * 已经订阅的minerId 发送取消订阅命令，不在推送数据 
    
tips:
> 对于不存在的worker添加字段标识 del,前端从页面删除 

#### 数据结构
配置信息

      "MinerConfigs": [
        {
          "MinerId": "f01000",
          "APIUrl": "",
          "APIToken": "",
          "HardWardSampleTime": {
            "Interval": 120,
            "Timeout": 60
          },
          "MinerInfoTime": {
            "Interval": 120,
            "Timeout": 60
          },
          "MiningInfoTime": {
            "Interval": 120,
            "Timeout": 60
          },
          "CmdConcurrentMaxNum": 100
        }
      ]

        